{% extends "base.html" %}
{% block html_lang %}{{ article.lang }}{% endblock %}
{% block head -%}
  {{ super() -}}
  {% if article.summary %}
    <meta name="description" content="{{ article.summary | striptags | safe | truncate(150) }}" />
  {% endif %}
{% endblock %}

{% block title %}{{ article.title|striptags }}{% endblock %}

{% block extra_head %}
  {% import 'translations.html' as translations with context %}
  {% if translations.entry_hreflang(article) %}
    {{ translations.entry_hreflang(article) }}
  {% endif %}
{% endblock %}

{% block hero %}
{% endblock hero %}

{% block content %}
  <section id="article" class="article section">
    <div class="container" data-aos="fade-up">
      <article class="article-content">
        <header class="article-header mb-4">
          <h1 class="article-title">{{ article.title }}</h1>
          <div class="article-meta">
            <span class="article-date"><i class="bi bi-calendar"></i> {{ article.date.strftime('%B %d, %Y') }}</span>
            {% if article.author %}
            <span class="article-author"><i class="bi bi-person"></i> {{ article.author }}</span>
            {% endif %}
            {% if article.category %}
            <span class="article-category"><i class="bi bi-folder"></i> {{ article.category }}</span>
            {% endif %}
          </div>
        </header>

        <div class="article-body">
          {{ article.content }}
        </div>

        {% if article.tags %}
        <div class="article-tags mt-4">
          <i class="bi bi-tags"></i>
          {% for tag in article.tags %}
          <a href="{{ SITEURL }}/{{ tag.url }}" class="badge bg-secondary">{{ tag }}</a>
          {% endfor %}
        </div>
        {% endif %}

        {% if DISQUS_SITENAME and SITEURL and article.status != "draft" %}
        <div class="article-comments mt-5">
          <h3>Comments</h3>
          <div id="disqus_thread"></div>
          <script type="text/javascript">
            var disqus_shortname = '{{ DISQUS_SITENAME }}';
            var disqus_identifier = '{{ article.url }}';
            var disqus_url = '{{ SITEURL }}/{{ article.url }}';
            (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//{{ DISQUS_SITENAME }}.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
          </script>
          <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
        {% endif %}

      </article>
    </div>
  </section>
{% endblock %}
